
## Цель работы

Освоить методы атак на веб-приложения, соответствующие категориям OWASP Top 10, через практическую эксплуатацию уязвимостей в контролируемой среде (OWASP Juice Shop).

---

## Задачи работы

- Провести SQL-инъекции для несанкционированного доступа к данным.
    
- Реализовать XSS-атаки (отражённые и хранимые).
    
- Эксплуатировать уязвимость Path Traversal для чтения конфиденциальных файлов.
    
- Достичь выполнения произвольного кода (RCE) на целевой системе.
    

---

## Теоретическая часть

### 1. Введение в анализ веб-уязвимостей

**Веб-приложения** стали основным вектором кибератак из-за их доступности и сложности архитектуры. **OWASP Top 10** — международно признанный стандарт классификации критических рисков безопасности, обновляемый каждые 3 года. Данная лабораторная работа фокусируется на практическом освоении четырёх ключевых уязвимостей из этого списка:

- **Инъекции (SQLi)** — внедрение злонамеренного кода в интерпретаторы (БД, ОС).
    
- **Межсайтовый скриптинг (XSS)** — выполнение вредоносных скриптов в браузере жертвы.
    
- **Неконтролируемый доступ к ресурсам (Path Traversal)** — обход ограничений файловой системы.
    
- **Удалённое выполнение кода (RCE)** — критическая уязвимость, позволяющая захватить контроль над сервером.
    

### 2. Механизмы эксплуатации уязвимостей

#### 2.1 SQL-инъекции (SQLi)

Возникают при некорректной обработке пользовательского ввода, передаваемого в СУБД. Злоумышленник может:

- Читать/изменять/удалять данные через конструкции типа `' OR 1=1--`
    
- Определять структуру БД с помощью `UNION SELECT`
    
- Выполнять команды ОС при наличии расширенных привилегий
    

**Последствия:** Утечка персональных данных, компрометация учётных записей, полный контроль над БД.

#### 2.2 Межсайтовый скриптинг (XSS)

**Отражённый (Reflected):**

- Скрипт внедряется через параметры URL (`http://site.com/search?q=<script>alert(1)</script>`)
    
- Требует взаимодействия жертвы (переход по ссылке)
    
- Используется для кражи сессий и фишинга
    

**Хранимый (Stored):**

- Вредоносный код сохраняется на сервере (в комментариях, профилях)
    
- Автоматически выполняется при открытии заражённой страницы
    
- Позволяет создавать ботнеты и распространять вредоносное ПО
    

#### 2.3 Path Traversal (LFI/RFI)

Уязвимость возникает при:

- Динамическом формировании путей к файлам без валидации
    
- Использовании пользовательского ввода в системных вызовах  
    Эксплуатация через последовательности `../` позволяет:
    

```
http://site.com/load?file=../../etc/passwd  
```
**Риски:** Чтение конфигураций, файлов окружения, логов.

#### 2.4 Удалённое выполнение кода (RCE)

Наиболее критичная уязвимость, часто возникающая из-за:

- Десериализации ненадёжных данных
    
- Небезопасной загрузки файлов
    
- Цепочки других уязвимостей (XSS + LFI)  
    Позволяет выполнить произвольные команды ОС:
    
```
; cat /etc/shadow  
```

### 3. Инструментарий

**Burp Suite:**

- Перехват трафика (Proxy)
    
- Подбор параметров (Intruder)
    
- Анализ сессий (Repeater, Sequencer)
    

**SQLMap:**

- Автоматическое определение типа инъекции (Boolean-based, Time-based)
    
- Извлечение схемы БД (таблицы, колонки)
    
- Декриптация хэшей паролей
    
- Экспорт результатов в форматы CSV, HTML
---

## Ход выполнения лабораторной работы

_Целевой хост: `http://localhost:3000` (стандартный для Juice Shop)_

### Шаг 1: Эксплуатация SQL-инъекций

**Цель:** Получить доступ к учетным данным администратора.

1. Перехватите запрос авторизации через Burp Suite.
    
2. В поле `email` введите:
    

sql

Copy

Download

' OR 1=1--  

3. Запустите SQLMap для автоматизации:
    

bash

Copy

Download

sqlmap -u "http://localhost:3000/rest/user/login" --data="email=*&password=test" --risk=3 --level=5 --dbs  

_Флаги:_

- `--dbs`: Перечислить базы данных.
    
- `--tables -D DB_NAME`: Получить таблицы.
    

---

### Шаг 2: Проведение XSS-атак

**2.1. Отражённый XSS (поиск):**

1. Введите в поисковую строку:
    

html

Copy

Download

Run

<script>alert(document.cookie)</script>  

2. При отображении результатов скрипт выполнится.
    

**2.2. Хранимый XSS (отзывы):**

1. Оставьте отзыв на продукт с содержимым:
    

html

Copy

Download

Run

<img src=x onerror=alert("Stored XSS")>  

2. При открытии страницы с отзывами скрипт активируется.
    

---

### Шаг 3: Path Traversal

**Цель:** Прочитать файл `/etc/passwd`.

1. Перейдите в раздел **"File Complaint"**.
    
2. В поле **"Choose file"** укажите путь:
    

text

Copy

Download

../../../../etc/passwd  

3. Отправьте форму. Сервер вернёт содержимое файла.
    

---

### Шаг 4: Получение RCE

**Цель:** Выполнить команду `id` на сервере.

1. Воспользуйтесь уязвимостью загрузки файлов (раздел **"Your Basket"** → **"Checkout"** → **"Choose File"**).
    
2. Загрузите файл с расширением `.md` и содержимым:
    

markdown

Copy

Download

<iframe src="data:text/html;base64,PHNjcmlwdD5hbGVydChkb2N1bWVudC5jb29raWUpPC9zY3JpcHQ+" />  

3. Через XSS или LFI добейтесь выполнения кода.
    

---

## Форма отчета

1. **Цель и задачи.**
    
2. **Теория:** Краткое описание OWASP Top 10 и инструментов.
    
3. **Результаты:**
    
    - Выводы SQLMap (скриншоты).
        
    - Доказательства XSS (фото всплывающих окон).
        
    - Содержимое файла из Path Traversal.
        
    - Результат выполнения RCE (вывод `id`).
        
4. **Выводы:**
    
    - Какие уязвимости эксплуатировались успешно?
        
    - К каким последствиям приводят эти уязвимости?
        
    - Меры защиты (санитизация ввода, WAF, принцип минимальных привилегий).
        

---

## Вопросы для самоконтроля

1. Как SQL-инъекция связана с нарушением конфиденциальности?
    
2. Чем опасен хранимый XSS по сравнению с отражённым?
    
3. Почему Path Traversal является нарушением контроля доступа?
    
4. Какие риски создаёт RCE для инфраструктуры?
    
5. Как Burp Suite помогает в поиске уязвимостей?
    
6. Назовите 3 способа защиты от инъекций.